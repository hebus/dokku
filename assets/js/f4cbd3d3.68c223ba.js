"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9525],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>h});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var d=n.createContext({}),p=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},s=function(e){var t=p(e.components);return n.createElement(d.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,d=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=p(a),c=i,h=m["".concat(d,".").concat(c)]||m[c]||u[c]||r;return a?n.createElement(h,l(l({ref:t},s),{},{components:a})):n.createElement(h,l({ref:t},s))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=c;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o[m]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},742:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(87462),i=(a(67294),a(3905));const r={layout:"default",title:"Advanced Module",parent:"Components",grand_parent:"Libraries",sidebar_position:13},l="Advanced Module",o={unversionedId:"libraries/components/advanced",id:"libraries/components/advanced",title:"Advanced Module",description:"Features",source:"@site/docs/libraries/components/advanced.md",sourceDirName:"libraries/components",slug:"/libraries/components/advanced",permalink:"/dokku/docs/libraries/components/advanced",draft:!1,editUrl:"https://github.com/hebus/dokku/tree/main/docs/libraries/components/advanced.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{layout:"default",title:"Advanced Module",parent:"Components",grand_parent:"Libraries",sidebar_position:13},sidebar:"tutorialSidebar",previous:{title:"Labels Module",permalink:"/dokku/docs/libraries/components/labels"},next:{title:"Slide Builder Module",permalink:"/dokku/docs/libraries/components/slide-builder"}},d={},p=[{value:"Features",id:"features",level:2},{value:"Import",id:"import",level:2},{value:"Advanced Service",id:"advanced-service",level:2},{value:"Form Validation",id:"form-validation",level:3},{value:"Extras",id:"extras",level:3},{value:"Components",id:"components",level:2},{value:"Directives",id:"directives",level:2},{value:"Sample use case",id:"sample-use-case",level:2}],s={toc:p},m="wrapper";function u(e){let{components:t,...a}=e;return(0,i.kt)(m,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"advanced-module"},"Advanced Module"),(0,i.kt)("h2",{id:"features"},"Features"),(0,i.kt)("p",null,"This module provides a bench of advanced-search functionalities, as well as components to build custom advanced-search forms:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"AdvancedService"),": manages the different operations that can be used to perform an advanced-search in Sinequa."),(0,i.kt)("li",{parentName:"ul"},"A list of components seen as basic bricks to build a custom advanced-search form . These components are styled with the Bootstrap library, and their class names start with ",(0,i.kt)("inlineCode",{parentName:"li"},"Bs"),".")),(0,i.kt)("h2",{id:"import"},"Import"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { BsAdvancedModule } from '@sinequa/components/advanced';\n\n@NgModule({\n  imports: [\n      /*....*/\n      BsAdvancedModule,\n      /*....*/\n  ],\n  /*....*/\n})\n")),(0,i.kt)("p",null,"This module is internationalized: If not already the case, you need to import its messages for the language(s) of your application. For example, in your app's ",(0,i.kt)("inlineCode",{parentName:"p"},"src/locales/en.ts"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'...\nimport {enAdvanced} from "@sinequa/components/advanced";\n\nconst messages = Utils.merge({}, ..., enAdvanced, appMessages);\n')),(0,i.kt)("h2",{id:"advanced-service"},"Advanced Service"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedService")," exposes a variety of methods and interfaces."),(0,i.kt)("p",null,"If you want to create your own advanced-search form, you will need to define a list of ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/api/forms/FormControl"},"FormControl"),". Here, a set of dedicated methods is provided :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createSelectControl(field: string, validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a FormControl dedicated to a standard select. Behind the scenes, this method uses ",(0,i.kt)("strong",{parentName:"p"},"getValue(...)")," to initialize the value of the returned FormControl.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createInputControl(field: string, validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a FormControl dedicated to a standard input. Behind the scenes, this method uses ",(0,i.kt)("strong",{parentName:"p"},"getValue(...)")," to initialize the value of the returned FormControl.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createCheckboxControl(field: string, validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a FormControl dedicated to a standard checkbox. Behind the scenes, this method uses ",(0,i.kt)("strong",{parentName:"p"},"getBooleanValue(...)")," to initialize the value of the returned FormControl.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createMultiInputControl(field: string, validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a FormControl dedicated to an input supporting multi values. Behind the scenes, this method uses ",(0,i.kt)("strong",{parentName:"p"},"getValue(...)")," to initialize the value of the returned FormControl.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createRangeControl(field: string, validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a FormControl dedicated to a custom element supporting a ",(0,i.kt)("strong",{parentName:"p"},"range")," definition (a coupled elements used as ",(0,i.kt)("strong",{parentName:"p"},"from .. to")," ). Behind the scenes, this method uses ",(0,i.kt)("strong",{parentName:"p"},"getRangeValue(...)")," to initialize the value of the returned FormControl."))),(0,i.kt)("p",null,"Notice that the field parameter represents the ",(0,i.kt)("strong",{parentName:"p"},"column / alias")," to which we are applying our filter."),(0,i.kt)("p",null,"All above methods invokes the generic helper :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"createControl(value: AdvancedValue | ValueItem | ValueItem[], validators?: ValidatorFn[], asyncValidators?: AsyncValidatorFn[]): FormControl")),(0,i.kt)("p",{parentName:"li"},"  This method creates a generic FormControl."))),(0,i.kt)("h3",{id:"form-validation"},"Form Validation"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedService")," also enhance the FormControl creation experience with some packaged ",(0,i.kt)("strong",{parentName:"p"},"Validators")," which can be optionally passed to each one of the above methods."),(0,i.kt)("p",null,"Those validators are accessible via the ",(0,i.kt)("strong",{parentName:"p"},"readonly")," attribute ",(0,i.kt)("inlineCode",{parentName:"p"},"advancedFormValidators")," implementing ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedFormValidators")," interface :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"{\n    min: (min: string | number | Date, field: string) => ValidatorFn;\n    max: (max: string | number | Date, field: string) => ValidatorFn;\n    required: ValidatorFn;\n    email: ValidatorFn;\n    pattern: (pattern: string | RegExp) => ValidatorFn;\n    integer: (field: string) => ValidatorFn;\n    number: (field: string) => ValidatorFn;\n    date: (field: string) => ValidatorFn;\n    range: (field: string) => ValidatorFn;\n}\n")),(0,i.kt)("h3",{id:"extras"},"Extras"),(0,i.kt)("p",null,"Actually, each created FormControl is not useful unless it is able to perform some related advanced-search lifecycle actions. For this, ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedService")," comes with several methods :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getValue(field: string, query?: Query | undefined): ValueItem | ValueItem[] | undefined")),(0,i.kt)("p",{parentName:"li"},"  This method retrieves the value to be set to a specific FormControl (select, input, multi-input ...) from the query.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getBooleanValue(field: string, query?: Query | undefined): boolean | undefined")),(0,i.kt)("p",{parentName:"li"},"  This method retrieves the value to be set to a specific FormControl (checkbox ...) from the query.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getRangeValue(field: string, query?: Query | undefined): AdvancedValue")),(0,i.kt)("p",{parentName:"li"},"  This method retrieves the value to be set to a specific FormControl (range ...) from the query.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getAdvancedExpr(field: string, query?: Query | undefined): Expr | undefined")),(0,i.kt)("p",{parentName:"li"},"  This method returns the expression of an advanced filter from the query.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getValueFromExpr(expr: Expr): ValueItem | ValueItem[]")),(0,i.kt)("p",{parentName:"li"},"  This method extracts the value from the expression.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"setSelect(field: string, value: ValueItem | ValueItem[] | undefined, query?: Query | undefined, combineWithAnd?: boolean): void")),(0,i.kt)("p",{parentName:"li"},"  This method updates the query with a value of a specific FormControl (select, input, multi-input ...).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"setBooleanSelect(field: string, value: boolean | undefined, allowFalsy?: boolean, query?: Query | undefined): void")),(0,i.kt)("p",{parentName:"li"},"  This method updates the query with a value of a specific FormControl (checkbox ...).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},'setNumericalSelect(field: string, value: string | Date | number | ValueItem | undefined, operator: ">" | ">=" | "<" | "<=" | "=" | "<>", query?: Query | undefined): void')),(0,i.kt)("p",{parentName:"li"},"  This method updates the query with a value of a specific FormControl (numeric-input ...).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"setRangeSelect(field: string, range: (string | Date | number)[] | undefined, query?: Query | undefined): void")),(0,i.kt)("p",{parentName:"li"},"  This method updates the query with a value of a specific FormControl (range ...).")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"setAdvancedSelect(field: string, expr: string | undefined, query?: Query | undefined): void")),(0,i.kt)("p",{parentName:"li"},"  This is the helper method which update the select attribute of the query. If no expression provided, the filter of the corresponding field will be entirely removed.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"removeAdvancedValue(field: string, search: boolean, query?: Query | undefined): void")),(0,i.kt)("p",{parentName:"li"},"  This method removes a specific advanced value by its field name from a given query and then can trigger a new search event.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"resetAdvancedValues(search: boolean, query?: Query | undefined): void")),(0,i.kt)("p",{parentName:"li"},"  This method removes all advanced values from a given query and then can trigger a new search event.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"getAdvancedValues(query?: Query | undefined): Object")),(0,i.kt)("p",{parentName:"li"},"  This method returns an object containing all the filled (field, value) in the advanced-search form."))),(0,i.kt)("p",null,"All above methods use the parameter ",(0,i.kt)("strong",{parentName:"p"},"query")," as optional. If it is not provided, ",(0,i.kt)("strong",{parentName:"p"},"searchService.query")," will be used by default."),(0,i.kt)("p",null,"Other helpers methods are provided within ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedService")," to facilitate custom manipulations of advanced-search feature :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"asValueItems(value: ValueItem | ValueItem[], field: string): ValueItem[]")),(0,i.kt)("p",{parentName:"li"},"  This method transforms a given value to a parsed ValueItem[].")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"formatValueItems(field: string, value: ValueItem | ValueItem[]): ValueItem | ValueItem[]")),(0,i.kt)("p",{parentName:"li"},"  This method returns a formatted copy of the given value.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"formatAdvancedValue(field: string, value: AdvancedValue): AdvancedValue")),(0,i.kt)("p",{parentName:"li"},"  This method returns a formatted copy of the given value.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"castAdvancedValue(value: BaseAdvancedValue, column: CCColumn | undefined): BaseAdvancedValue")),(0,i.kt)("p",{parentName:"li"},"  This method cast a given advanced value as per its column definition."))),(0,i.kt)("p",null,"If you want create a new custom component for your advanced-search form, you can, for sure, do it and still be able to benefit of all built-in methods."),(0,i.kt)("h2",{id:"components"},"Components"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedModule")," has a set of packaged components which serve as a basic bricks of an advanced-search form :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormSelect")," component is used to display a select element compatible with any advanced-search form."),(0,i.kt)("p",{parentName:"li"},"The inputs of the component are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"form"),": The advanced-search form."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"label"),": Optional input used to override the default label in the column definition."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"multiple"),": Whether the multiple selection is allowed or not."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"aggregation"),": Optional input that defines the aggregation name used to fill the select options.")))),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form-select",null)),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormInput")," component is used to display an input element compatible with any advanced-search form."),(0,i.kt)("p",{parentName:"li"},"The inputs of the component are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"form"),": The advanced-search form."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"label"),": Optional input used to override the default label in the column definition."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"suggestQuery"),": The string value of the suggest query to be used for the autocomplete.")))),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form-input",null)),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormMultiInput")," component is used to display a multi-value input element compatible with any advanced-search form."),(0,i.kt)("p",{parentName:"li"},"The inputs of the component are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"form"),": The advanced-search form."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"label"),": Optional input used to override the default label in the column definition."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"suggestQuery"),": The string value of the suggest query to be used for the autocomplete.")))),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form-multi-input",null)),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormRange")," component is used to display a range input element compatible with any advanced-search form."),(0,i.kt)("p",{parentName:"li"},"The inputs of the component are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"form"),": The advanced-search form."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"label"),": Optional input used to override the default label in the column definition."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"min"),": The lowest possible limit."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"max"),": The highest possible limit.")))),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form-range",null)),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormCheckbox")," component is used to display a checkbox element compatible with any advanced-search form."),(0,i.kt)("p",{parentName:"li"},"The inputs of the component are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"form"),": The advanced-search form."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"label"),": Optional input used to override the default label in the column definition.")))),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form-checkbox",null)),(0,i.kt)("h2",{id:"directives"},"Directives"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"AdvancedModule")," embeds its own directives to handle custom features of the advanced-search :"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormAutocomplete")," provides the ",(0,i.kt)("inlineCode",{parentName:"p"},"sqAdvancedFormAutocomplete")," directive. It extends and overrides the main ",(0,i.kt)("inlineCode",{parentName:"p"},"sqAutocomplete")," directive."),(0,i.kt)("p",{parentName:"li"},"The inputs of the directive are quiet simple :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"field"),": The column / alias of the applied filter."),(0,i.kt)("p",{parentName:"li"},"This directive also emits an ",(0,i.kt)("inlineCode",{parentName:"p"},"UpdateItem")," event which is needed to synchronize the search item in the parent component.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormAutocompleteMultiInput")," provides the ",(0,i.kt)("inlineCode",{parentName:"p"},"sqAdvancedFormAutocompleteMultiInput")," directive. It extends and overrides ",(0,i.kt)("inlineCode",{parentName:"p"},"sqAdvancedFormAutocomplete")," directive."),(0,i.kt)("p",{parentName:"li"},"The inputs of the directive are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"items"),": Initial list of search terms already existing in the advanced search.")),(0,i.kt)("p",{parentName:"li"},"This directive also emits an ",(0,i.kt)("inlineCode",{parentName:"p"},"itemsUpdate")," event which is needed to synchronize the search terms in the parent component.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"BsAdvancedFormValidation")," provides the ",(0,i.kt)("inlineCode",{parentName:"p"},"sqAdvancedFormValidation")," directive. It extends and overrides the main ",(0,i.kt)("inlineCode",{parentName:"p"},"sqValidation")," directive."),(0,i.kt)("p",{parentName:"li"},"The inputs of the directive are :"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"field"),": The column / alias of the applied filter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"validationForm"),": The advanced-search form.")))),(0,i.kt)("h2",{id:"sample-use-case"},"Sample use case"),(0,i.kt)("p",null,"A working example could be the integration of an ",(0,i.kt)("em",{parentName:"p"},"advanced search form")," in the search form used in ",(0,i.kt)("a",{parentName:"p",href:"/dokku/docs/apps/pepper#integrated-search-form"},"Pepper application"),"."),(0,i.kt)("p",null,"In this section, we will go through the main keys of how to easily instantiate an advanced search form :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"First of all, we need to build the form. The best practice is to create a new component containing all the business logic. ")),(0,i.kt)("p",null,(0,i.kt)("doc-advanced-form",null)),(0,i.kt)("p",null,"The main idea is to start by adding your controls to the form object. Here, you can easily apply validators as much as you want :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"  this.form.addControl('treepath', this.advancedService.createSelectControl('treepath'));\n  this.form.addControl('modified', this.advancedService.createRangeControl('modified',\n    [\n      this.advancedService.validators.range('modified'),\n      this.advancedService.validators.date('modified')\n    ]\n  ));\n  this.form.addControl('person', this.advancedService.createMultiInputControl('person'));\n  this.form.addControl('docformat', this.advancedService.createInputControl('docformat'));\n")),(0,i.kt)("p",null,"  In this example, we add several FormControl such as ",(0,i.kt)("strong",{parentName:"p"},"modified"),", to which we apply 2 validators; ",(0,i.kt)("strong",{parentName:"p"},"range()")," and ",(0,i.kt)("strong",{parentName:"p"},"date()"),".\nYou can also note that the build process of the form is set in the callback of ",(0,i.kt)("inlineCode",{parentName:"p"},"this.firstPageService.getFirstPage()"),". Its role is to load autocompletion suggestions and whatever data needed in the initialization of advanced-search components.\nYou should ",(0,i.kt)("strong",{parentName:"p"},"carefully")," notice that the ",(0,i.kt)("strong",{parentName:"p"},"name")," of each formControl is exactly the ",(0,i.kt)("strong",{parentName:"p"},"same as")," its ",(0,i.kt)("strong",{parentName:"p"},"field")," property."),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Next step is to mutually update of the ",(0,i.kt)("strong",{parentName:"p"},"form")," and the ",(0,i.kt)("strong",{parentName:"p"},"query")," according to users interactions. This is the role of both methods ",(0,i.kt)("inlineCode",{parentName:"p"},"updateFormOnQueryChange()")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"updateQuery()"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Then, feel free to design the look & feel of your advanced search form as you want.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Once the component is ready, you can integrate it in the search form :"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<sq-search-form #searchForm\n  [query]="searchService.query"\n  [showFilterCount]="true"\n  [autoSubmit]="false">\n\n  <ng-template let-query>\n\n    <div class="search-dropdown border-top m-2">\n\n        ...\n\n        <hr/>\n\n        <div class="small fw-bold mb-1 ms-3 me-auto">Advanced Search Form:</div>\n        \x3c!-- The new advanced search form you have just created ! --\x3e\n        <sq-advanced-form\n            [query]="query"\n            (filterEdit)="onFiltersChange()">\n        </sq-advanced-form>\n\n        ...\n\n    </div>\n\n  </ng-template>\n\n</sq-search-form>\n')))}u.isMDXComponent=!0}}]);