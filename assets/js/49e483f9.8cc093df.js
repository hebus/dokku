"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[356],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},h="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),h=c(n),u=a,m=h["".concat(s,".").concat(u)]||h[u]||d[u]||r;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},58464:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=n(87462),a=(n(67294),n(3905));const r={layout:"default",title:"Version control",parent:"Guides",nav_order:5},i="Version Control",l={unversionedId:"guides/version-control",id:"guides/version-control",title:"Version control",description:"While using a Version Control system is not mandatory, it is highly recommended for any serious development project. Using a Version Control system such as Git allows you to:",source:"@site/docs/guides/5-version-control.md",sourceDirName:"guides",slug:"/guides/version-control",permalink:"/dokku/docs/guides/version-control",draft:!1,editUrl:"https://github.com/hebus/dokku/tree/main/docs/guides/5-version-control.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{layout:"default",title:"Version control",parent:"Guides",nav_order:5},sidebar:"tutorialSidebar",previous:{title:"Deployment",permalink:"/dokku/docs/guides/deployment"},next:{title:"Updates",permalink:"/dokku/docs/guides/updates"}},s={},c=[{value:"Download the standard SBA workspace",id:"download-the-standard-sba-workspace",level:2},{value:"Track changes in the code",id:"track-changes-in-the-code",level:2},{value:"Work collaboratively with other developers",id:"work-collaboratively-with-other-developers",level:2},{value:"Review and approve changes before they are deployed",id:"review-and-approve-changes-before-they-are-deployed",level:2},{value:"Update the code with new versions of the SBA Framework",id:"update-the-code-with-new-versions-of-the-sba-framework",level:2},{value:"Deploy the code on a server",id:"deploy-the-code-on-a-server",level:2},{value:"Integrate with a Continuous Integration system",id:"integrate-with-a-continuous-integration-system",level:2}],p={toc:c},h="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(h,(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"version-control"},"Version Control"),(0,a.kt)("p",null,"While using a Version Control system is not mandatory, it is highly recommended for any serious development project. Using a Version Control system such as Git allows you to:"),(0,a.kt)("h2",{id:"download-the-standard-sba-workspace"},"Download the standard SBA workspace"),(0,a.kt)("p",null,"Simply run on your local computer:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/sinequa/sba-angular.git my-project\ncd my-project\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git clone",src:n(53243).Z,width:"327",height:"419"}),'{: style="height: 300px;" }'),(0,a.kt)("p",null,"The Git repository contains the source code of the SBA Framework, but the dependencies (i.e., the node modules) are not included. You need to install them with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\n")),(0,a.kt)("p",null,"(Note that the list of dependencies is defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," file, and the exact library versions are defined in the ",(0,a.kt)("inlineCode",{parentName:"p"},"package-lock.json")," file.)"),(0,a.kt)("h2",{id:"track-changes-in-the-code"},"Track changes in the code"),(0,a.kt)("p",null,"View your modified files with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git status\n")),(0,a.kt)("p",null,"A tool like ",(0,a.kt)("a",{parentName:"p",href:"https://desktop.github.com/"},"GitHub Desktop")," can also help you visualize the changes in your code."),(0,a.kt)("p",null,"Commit your changes (to your local clone of the repository) with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'git add .\ngit commit -m "My commit message"\n')),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git commit",src:n(47872).Z,width:"669",height:"403"}),'{: style="height: 300px;" }'),(0,a.kt)("h2",{id:"work-collaboratively-with-other-developers"},"Work collaboratively with other developers"),(0,a.kt)("p",null,"When working collaboratively, you need a central repository to host the code. This can be a private repository on an internal server or a public repository on a service like ",(0,a.kt)("a",{parentName:"p",href:"https://github.com"},"Github"),"."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"If you cloned the official SBA repository, your local clone is configured to push to that repository. But obviously, you do not have write access to it! You need to add a new remote repository that you own and have write access to.")),(0,a.kt)("p",null,"For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git remote add internal https://my-internal-git-server/my-project.git\n")),(0,a.kt)("p",null,"Then you can push your changes to that repository with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git push internal master\n")),(0,a.kt)("p",null,"Then, other developers can clone your repository with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://my-internal-git-server/my-project.git\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git push",src:n(47450).Z,width:"949",height:"409"})),(0,a.kt)("p",null,"Whenever new changes are pushed to the central repository, you can pull them with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git pull internal master\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git pull",src:n(96065).Z,width:"831",height:"406"}),'{: style="height: 300px;" }'),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"git pull")," is actually a shortcut for ",(0,a.kt)("inlineCode",{parentName:"p"},"git fetch")," (which downloads the changes) and ",(0,a.kt)("inlineCode",{parentName:"p"},"git merge")," (which merges the changes into your local branch). If there are conflicts, the merge process will ask you to resolve them manually."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Note that after a ",(0,a.kt)("inlineCode",{parentName:"p"},"git pull"),", the project dependencies might have been updated, so you need to run ",(0,a.kt)("inlineCode",{parentName:"p"},"npm install")," again.")),(0,a.kt)("h2",{id:"review-and-approve-changes-before-they-are-deployed"},"Review and approve changes before they are deployed"),(0,a.kt)("p",null,"A good habit is working on a separate branch for each feature or bug fix. This allows you to review the changes before they are merged into the ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," branch."),(0,a.kt)("p",null,"To create a new branch for a special feature, run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git checkout -b my-feature\n")),(0,a.kt)("p",null,"Then, commit your changes as usual."),(0,a.kt)("p",null,"When you are ready to merge your changes into the ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," branch, push your branch to the central repository with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git push internal my-feature\n")),(0,a.kt)("p",null,"Then in the central repository, create a Pull Request to merge your branch into the ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," branch. This will trigger a code review process, and the changes will only be merged into the ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," branch when they are approved."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git pull request",src:n(30311).Z,width:"1038",height:"402"})),(0,a.kt)("p",null,"After that, the branch can be deleted, and all developers can pull the changes with a simple ",(0,a.kt)("inlineCode",{parentName:"p"},"git pull"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Git delete",src:n(8785).Z,width:"889",height:"404"})),(0,a.kt)("h2",{id:"update-the-code-with-new-versions-of-the-sba-framework"},"Update the code with new versions of the SBA Framework"),(0,a.kt)("p",null,"The SBA repository is updated regularly. The changes might conflict with your own code, so the update process can be complicated (See the ",(0,a.kt)("a",{parentName:"p",href:"/dokku/docs/guides/updates"},"Updates guide"),")."),(0,a.kt)("p",null,"In the simple case when there are no conflicts, you can run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# Fetch the latest changes from the official SBA repository (your "origin" remote)\ngit fetch origin\n# Merge the changes into your local "master" branch\ngit merge origin/master\n')),(0,a.kt)("p",null,"Now your local master branch has all the commits from the official SBA repository AND all the commits from your project."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"git merge",src:n(66734).Z,width:"777",height:"403"})),(0,a.kt)("p",null,"When there are conflicts (i.e., when the same lines of code were modified in both repositories), Git points them out, and you will need to resolve them manually (i.e., choose which change to keep, which change to discard, or a mix of both)."),(0,a.kt)("h2",{id:"deploy-the-code-on-a-server"},"Deploy the code on a server"),(0,a.kt)("p",null,"A simple strategy to deploy your application on a Sinequa server is to clone the repository in the Sinequa data folder, run ",(0,a.kt)("inlineCode",{parentName:"p"},"npm install")," and then build the application with ",(0,a.kt)("inlineCode",{parentName:"p"},"npm run buildvanilla"),". (This command can be executed from the administration interface.) See the ",(0,a.kt)("a",{parentName:"p",href:"/dokku/docs/guides/deployment"},"deployment guide")," for more details."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Deploying on Sinequa server with Git",src:n(52935).Z,width:"911",height:"402"})),(0,a.kt)("p",null,"While this process works, it has some drawbacks:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It forces you to install the node modules on the server (requiring Internet access and various tools)"),(0,a.kt)("li",{parentName:"ul"},"It requires you to build the application on the server (which can be slow and consume resources)"),(0,a.kt)("li",{parentName:"ul"},"It cannot be fully automated")),(0,a.kt)("h2",{id:"integrate-with-a-continuous-integration-system"},"Integrate with a Continuous Integration system"),(0,a.kt)("p",null,"A Continuous Integration (CI) system is a tool that automates the build and deployment process. It can be used to build and deploy your application on a Sinequa server and also to run automated tests and perform other tasks. It can be configured to run automatically when new commits are pushed to the central repository."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Deploying on Sinequa server with a CI/CD pipeline",src:n(50075).Z,width:"994",height:"421"})),(0,a.kt)("p",null,"Your CI system must have access to the Sinequa server. This could be done by configuring the Sinequa server to allow remote access (e.g., via PowerShell Remoting). Alternatively, the CI system could be hosted on the same server as Sinequa."))}d.isMDXComponent=!0},50075:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-ci-a63b7c824a2494f8354423b4b2fdbc6b.png"},53243:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-clone-75a08d08ba30df8a532d54ec402b8735.png"},47872:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-commit-5fc46c6da8658470bcb664d961185b0e.png"},8785:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-delete-40e4079254e737bc99215f0087e6f290.png"},66734:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-merge-70e9b881ebc78bcf1232c9fd124ced17.png"},30311:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-pr-8dd9896d46bd4ee88e72c827a4febeb1.png"},96065:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-pull-3ce9cefd25815a688f7bd9ba27412f64.png"},47450:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-push-eb84d12873149828173ba5986714581b.png"},52935:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/git-server-53f80d1da72bd6d35da140044dc071c6.png"}}]);